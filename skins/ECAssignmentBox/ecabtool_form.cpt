<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN"
                      "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en"
  lang="en"
  metal:use-macro="here/prefs_main_template/macros/master"
  i18n:domain="eduComponents">

  <metal:block fill-slot="top_slot"
    tal:define="dummy python:request.set('disable_border', 1)" />

  <body>
    <div metal:fill-slot="prefs_configlet_main"
        tal:define="errors  options/state/getErrors;
            ecab_utils nocall:portal/ecab_utils;">

      <h1 i18n:translate="heading_ecab_prefs">ECAssignmentBox preferences</h1>

      <a href=""
        class="link-parent"
        tal:attributes="href string: $portal_url/plone_control_panel"
        i18n:translate="label_up_to_plone_setup">
        Up to Plone Setup
      </a>

      <p i18n:translate="description_ecab_prefs">ECAssignmentBox settings.</p>

      <form action=""
          name="ecab_prefs"
          method="post"
          tal:attributes="action string:${here/absolute_url}/${template/getId}">

        <fieldset>
          <legend i18n:translate="legend_ecab_prefs">
            Mapping
          </legend>

          <div class="field"
              tal:define="student_id_attr  request/student_id_attr | ecab_utils/student_id_attr;
              error errors/student_id_attr | nothing;"
              tal:attributes="class  python:test(error, 'field error', 'field');">

            <label i18n:translate="label_student_id">Student ID</label>

            <div class="formHelp" i18n:translate="help_student_id_attr">
              TODO.
            </div>

            <div tal:condition="error" 
                tal:content="error" 
                i18n:translate="error_student_id_attr">Error message
            </div>

            <input name="student_id_attr" 
                type="text" 
                tal:attributes="value    student_id_attr;
                                tabindex tabindex/next;"/>
          </div>
  
          <div class="field"
              tal:define="major_attr  request/major_attr | ecab_utils/major_attr;
                          error errors/major_attr | nothing;"
              tal:attributes="class  python:test(error, 'field error', 'field');">
        
            <label i18n:translate="label_major">Major</label>

            <div class="formHelp" i18n:translate="help_major_attr">
              TODO.
            </div>

            <div tal:condition="error" 
                tal:content="error" 
                i18n:translate="error_major_attr">Error message
            </div>
    
            <input name="major_attr" 
                type="text" 
                tal:attributes="value    major_attr;
                                tabindex tabindex/next;"/>
          </div>

          <div class="formControls">
            <input class="context"
              tabindex=""
              type="submit"
              name="form.button.Save"
              value="Save"
              i18n:domain="plone"
              i18n:attributes="value"
              tal:attributes="tabindex tabindex/next;"/>

            <input class="standalone"
              tabindex=""
              type="submit"
              name="form.button.Cancel"
              value="Cancel"
              i18n:domain="plone"
              i18n:attributes="value"
              tal:attributes="tabindex tabindex/next;"/>
          </div>

        </fieldset>
        <input type="hidden" name="form.submitted" value="1" />
      </form>
    </div>
  </body>
</html>
